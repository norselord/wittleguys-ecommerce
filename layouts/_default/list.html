{{ define "main" }}
<!-- Products Section -->
<section class="products-section">
    <div class="products-container">
        <h2 class="section-title">{{ .Title }}</h2>
        {{ if .Content }}
        <div class="content" style="margin-bottom: 3rem;">
            {{ .Content }}
        </div>
        {{ end }}
        <div class="products-grid">
            {{ range .Pages }}
            <div class="product-card">
                <a href="{{ .RelPermalink }}">
                    {{ if .Params.image }}
                        <img src="{{ .Params.image }}" alt="{{ .Title }}">
                    {{ end }}
                    <h3>{{ .Title }}</h3>
                    <p class="product-price">${{ .Params.price }}</p>
                </a>
                {{ if eq .Section "products" }}
                <button class="add-to-cart-btn" type="button" onclick="addToCart('{{ with .File }}{{ .BaseFileName }}{{ else }}{{ .Title | urlize }}{{ end }}', '{{ .Title }}', {{ .Params.price }}, '{{ .Params.image }}', '{{ .Params.stripe_price_id }}', this)">
                    <span class="btn-text">Add to Cart</span>
                    <span class="loading">Processing...</span>
                </button>
                {{ end }}
            </div>
            {{ end }}
        </div>
    </div>
</section>
{{ end }} 